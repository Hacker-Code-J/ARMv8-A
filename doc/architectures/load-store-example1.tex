\documentclass{standalone}
\input{../tikz}

\begin{document}
\begin{tikzpicture}[>=Stealth, line width=.5mm]
	\def \x{15}
	\def \y{15}
%	\draw[very thin,color=gray!15,step=.5] (-\x,-\y) grid (\x,\y);
%	
%	\foreach \i in {-\x,...,-2,-1,1,2,...,\x}
%	\draw[gray] (\i,.1)--(\i,-.1) node[below] {$\i$};%x-axis
%	\foreach \i in {-\y,-1,1,1,\y}
%	\draw[gray] (.1,\i)--(-.1,\i) node[left] {$\i$};%y-axis

% Processor Core Section
\begin{scope}[xshift=0cm]

	% Registers section (left side)
	\node[above] at (-2.5, 8) {\large\bf Registers};
	\draw[] (-5, -8) rectangle (0, 8); % Outer box
	\foreach \i in {0, 1, 2, 3, 4, 5, 6, 7, 8} {
		\node[anchor=west] at (-6, 7.5-\i) {X\i};
	}
	\foreach \i in {27, 28, 29, 30} {
		\node[anchor=west] at (-6, -1.5-\i+24) {x\i};
	}
	\node[align=center,scale=.7] at (-5.5, -2.5) {$\bullet$\\ $\bullet$\\ $\bullet$};
	\node[align=center,scale=.7] at (-2.5, -2.5) {$\bullet$\\ $\bullet$\\ $\bullet$};
	\foreach \i in {7,6,5,4,3,2,1,0,-1} {
		\draw (-5,\i) -- (0, \i);
	}
	\foreach \i in {-4,-5,-6,-7} {
		\draw (-5,\i) -- (0, \i);
	}
	
	\draw[] (-5, -8.25) to (-5, -8.75);
	\draw[] (0, -8.25) to (0, -8.75);
	\draw[<->] (-5, -8.5) to (0, -8.5);
	\node[below] at (-2.5, -8.5) {\large $64$-bit};
	
	\node[red] at (-2.5, 3.5) {\texttt{0x0000005555550768}};
	\node[blue] at (-3.75, -.5) {\texttt{00000000}};
	\node[blue] at (-1.25, -.5) {\texttt{cc25497b}};
	
	\draw[red, line width=1mm] (-5, 3) rectangle (0, 4);
	\draw[blue, line width=1mm] (-2.5, -1) rectangle (0, 0);
\end{scope}
	
% Memory section (right side)
\begin{scope}[xshift=2cm]
	% Contents
	\draw[] (0, -8) rectangle (2, 8); % Outer box
	\draw[dotted] (2, -8) rectangle (6, 8); % Outer box
	\foreach \i in {7,6,...,0} {
		\draw (0,\i) -- (2, \i);
		\draw (0,-\i) -- (2, -\i);
	}
	% Address
	\foreach \i in {7,6,...,0} {
		\draw[dotted] (2,\i) -- (6, \i);
		\draw[dotted] (2,-\i) -- (6, -\i);
	}
	\draw (0,8) to (0,8.5); \draw (2,8) to (2,9);
	\draw[smooth] plot coordinates {(0,8.5) (.5, 9) (1.5, 8.5) (2,9)};
	\draw (0,-8) to (0,-9); \draw (2,-8) to (2,-8.5);
	\draw[smooth] plot coordinates {(2,-8.5) (1.5, -9) (.5, -8.5) (0,-9)};
	
	\foreach \i/\j in {
		7.5/0xa4,
		6.5/0x01,
		5.5/0x9b,
		4.5/0xf7,
		3.5/0x8a,
		2.5/0xda,
		1.5/0x0f,
		.5/0xd0,
		-.5/0xed,
		-1.5/0xda,
		-2.5/0xeb,
		-3.5/0xfe,
		-4.5/0xcc,
		-5.5/0x25,
		-6.5/0x49,
		-7.5/0x7b
	} {
		\node[magenta] at (1, \i) {\texttt{\j}};
	}
	
	\foreach \i/\j in {
		7.5/0x0000005555550777,
		6.5/0x0000005555550776,
		5.5/0x0000005555550775,
		4.5/0x0000005555550774,
		3.5/0x0000005555550773,
		2.5/0x0000005555550772,
		1.5/0x0000005555550771,
		.5/0x0000005555550770,
		-.5/0x000000555555076f,
		-1.5/0x000000555555076e,
		-2.5/0x000000555555076d,
		-3.5/0x000000555555076c,
		-4.5/0x000000555555076b,
		-5.5/0x000000555555076a,
		-6.5/0x0000005555550769,
		-7.5/0x0000005555550768
	} {
		\node[cyan] at (4, \i) {\texttt{\j}};
	}

	\draw[red, line width=1mm] (2, -8) rectangle (6, -7);
	\draw[blue, line width=1mm] (0, -4) rectangle (2, -8);
	
	\draw[dotted, red, line width=1mm] (4, -8) -- (4,-8.5) -- (-.5, -8.5) -- (-.5,3.5) -- (-2,3.5) node[above right] {\Large\ttfamily [x4]};
	\draw[dotted, blue, line width=1mm, ->] (0, -6) -- (-1, -6) -- (-1, -.5) -- (-2, -.5) node[above right] {\Large\ttfamily w8};
\end{scope}
\end{tikzpicture}
\end{document}
